(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"gameState",function(){return W}),a.d(n,"roster",function(){return me}),a.d(n,"resources",function(){return ge}),a.d(n,"inventory",function(){return Se}),a.d(n,"squad",function(){return je}),a.d(n,"equipment",function(){return Ge}),a.d(n,"actors",function(){return Fe}),a.d(n,"activeTime",function(){return ze}),a.d(n,"battle",function(){return nt}),a.d(n,"battleLog",function(){return st}),a.d(n,"targetActor",function(){return dt}),a.d(n,"progression",function(){return vt});var r={};a.r(r),a.d(r,"battleStage",function(){return ht}),a.d(r,"unitID",function(){return Et});var c,o=a(0),i=a.n(o),s=a(78),l=a(7),u=a(3),m=a(14),d=a(2),f=a(9),p=a(5),b="[ROUTING]",g="".concat(b," Go to Home page"),v="".concat(b," Go to Settings page"),h="".concat(b," Go to Adventure page"),E="".concat(b," Go to Squad page"),y="".concat(b," Go to Unit page"),O="".concat(b," Go to Battle page"),_="".concat(b," Go to Battle Result page"),I=function(){return{type:g,meta:{gameState:"routing"}}},S=function(){return{type:v,meta:{gameState:"routing"}}},D=function(){return{type:h,meta:{gameState:"routing"}}},N=function(e){return{type:O,payload:{battleStage:e},meta:{gameState:"routing"}}},k=(c={},Object(p.a)(c,g,"/"),Object(p.a)(c,v,"/settings"),Object(p.a)(c,h,"/adventure"),Object(p.a)(c,E,"/squad"),Object(p.a)(c,y,"/unit/:unitID"),Object(p.a)(c,O,{path:"/battle/:battleStage",confirmLeave:function(){return"Coward! Are you sure you want to from the battlefield? Things might break..."}}),Object(p.a)(c,_,"/battleResult"),c),A=k,j=Object(f.connectRoutes)(A,{initialDispatch:!1}),T=j.reducer,R=j.middleware,w=j.enhancer,L=j.initialDispatch,G=R,M=w,q=L,U=T,B=a(4),x=a.n(B),C="".concat("[GAMESTATE]"," Reset Game State"),H="".concat("[GAMESTATE]"," Add current page to Game State"),P="".concat("[GAMESTATE]"," Set current battle result in Game State"),Y={page:[g],battleResult:void 0},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case C:return Y;case H:var n=a.page,r=e.page,c=r.findIndex(function(e){return e===n});if(-1===c){var o=[].concat(Object(u.a)(r),[n]);return Object(d.a)({},x()(e),{page:o})}var i=Object(u.a)(r.slice(0,c+1));return Object(d.a)({},x()(e),{page:i});case P:var s=a.battleResult;return Object(d.a)({},x()(e),{battleResult:s});default:return e}},F="".concat("[ROSTER]"," Set initial roster members"),X="".concat("[ROSTER]"," Add new roster members"),V=function(){var e=(new Date).getTime(),t=function(e){var t=Math.random,a=Math.floor,n=Math.pow(10,e-1),r=9*n;return a(n+t()*r)}(4);return"".concat(e,"_").concat(Math.floor(e/t))},K=function(e,t){return e.reduce(function(e,a){var n=a[t];return e[n]||(e[n]=[]),e[n].push(a),e},{})},Q=function(e,t){return[].concat(e).sort(function(e,a){return e[t]<a[t]?-1:e[t]>a[t]?1:0})},z=function(e,t){var a={},n=Object(d.a)({},e,t);return Object.keys(n).map(function(r){var c=e[r],o=t[r],i=typeof c!==typeof o,s="undefined"===typeof c,l="undefined"===typeof o;return!1!==o&&(a[r]=s?o:l?c:i?o:function(e,t){switch(typeof e){case"number":return function(e,t){return(e||0)+(t||0)}.apply(void 0,Object(u.a)(t));case"string":return function(e,t){return t||e}.apply(void 0,Object(u.a)(t));case"object":return z.apply(void 0,Object(u.a)(t));default:return}}(n[r],[c,o]),!0)}),a},J={HUMAN:{ID:"HUMAN",name:"Human",avatar:{male:"\ud83d\udc68",female:"\ud83d\udc69"},stats:{hp:100,attack:40,defense:30,rate:50}},ELF:{ID:"ELF",name:"Elf",avatar:{male:"\ud83e\udddd\u200d\u2642\ufe0f",female:"\ud83e\udddd\u200d\u2640\ufe0f"},stats:{hp:80,attack:35,defense:20,rate:35}},FAIRY:{ID:"FAIRY",name:"Fairy",avatar:{male:"\ud83e\uddda\u200d\u2642\ufe0f",female:"\ud83e\uddda\u200d\u2640\ufe0f"},stats:{hp:60,attack:25,defense:10,rate:25}},ORC:{ID:"ORC",name:"Orc",avatar:{male:"\ud83d\udc79",female:"\ud83d\udc79"},stats:{hp:140,attack:30,defense:30,rate:50}},GOBLIN:{ID:"GOBLIN",name:"Goblin",avatar:{male:"\ud83d\udc7a",female:"\ud83d\udc7a"},stats:{hp:60,attack:30,defense:10,rate:35}},GHOST:{ID:"GHOST",name:"Ghost",avatar:{male:"\ud83d\udc7b",female:"\ud83d\udc7b"},stats:{hp:30,attack:20,defense:80,rate:60},status:{undead:!0}},SKELETON:{ID:"SKELETON",name:"Skeleton",avatar:{male:"\u2620\ufe0f",female:"\ud83d\udc80"},stats:{hp:80,attack:15,defense:15,rate:40},status:{undead:!0}},DRAGON:{ID:"DRAGON",name:"Skeleton",avatar:{male:"\ud83d\udc32",female:"\ud83d\udc32"},stats:{hp:1200,attack:80,defense:60,rate:120}},VAMPIRE:{ID:"VAMPIRE",name:"Vampire",avatar:{male:"\ud83e\udddb\u200d\u2642\ufe0f",female:"\ud83e\udddb\u200d\u2640\ufe0f"},stats:{hp:250,attack:40,defense:25,rate:80},status:{undead:!0}},GENIE:{ID:"GENIE",name:"Genie",avatar:{male:"\ud83e\uddde\u200d\u2642\ufe0f",female:"\ud83e\uddde\u200d\u2640\ufe0f"},stats:{hp:120,attack:50,defense:10,rate:70}},ZOMBIE:{ID:"ZOMBIE",name:"Zombie",avatar:{male:"\ud83e\udddf\u200d\u2642\ufe0f",female:"\ud83e\udddf\u200d\u2640\ufe0f"},stats:{hp:140,attack:30,defense:50,rate:120}},status:{undead:!0}},Z={SWORD_001:{ID:"SWORD_001",name:"gladius",type:"sword",icon:"\ud83d\udde1",range:10,rate:20,slots:1,slot:"hand",damage:[{category:"physical",element:"slashing",tier:{1:10,2:12,3:15,4:19,5:24}}]},SWORD_011:{ID:"011",name:"flame blade",type:"sword",icon:"\ud83d\udde1\ud83d\udd25",range:10,rate:20,slots:1,slot:"hand",damage:[{category:"physical",element:"slashing",tier:{1:8,2:10,3:13,4:17,5:22}},{category:"magical",element:"fire",tier:{1:4,2:6,3:9,4:13,5:18}}],stats:{rate:-10}},MACE_001:{ID:"MACE_001",name:"hammer",type:"mace",icon:"\ud83d\udd28",range:15,rate:25,slots:1,slot:"hand",damage:[{category:"physical",element:"blunt",tier:{1:12,2:14,3:17,4:21,5:26}}]},DAGGER_001:{ID:"DAGGER_001",name:"kitchen knife",type:"dagger",icon:"\ud83d\udd2a",range:10,rate:10,slots:1,slot:"hand",damage:[{category:"physical",element:"piercing",tier:{1:7,2:9,3:12,4:16,5:21}}]},BOW_001:{ID:"BOW_001",name:"wooden bow",type:"bow",icon:"\ud83c\udff9",range:100,rate:35,slots:2,slot:"twohanded",damage:[{category:"physical",element:"piercing",tier:{1:18,2:21,3:25,4:30,5:36}}]},SHIELD_001:{ID:"SHIELD_001",name:"simple shield",type:"shield",icon:"\ud83d\udee1",range:10,rate:15,slots:1,slot:"offhand",protection:[{category:"physical",element:"all",tier:{1:10,2:13,3:16,4:19,5:22}}]},SHIELD_011:{ID:"SHIELD_011",name:"earth shield",type:"shield",icon:"\ud83d\udee1\ud83e\udd54",range:10,rate:25,slots:1,slot:"offhand",protection:[{category:"physical",element:"all",tier:{1:15,2:18,3:21,4:24,5:27}},{category:"magical",element:"earth",tier:{1:4,2:6,3:9,4:13,5:18}}],stats:{hp:25}},TORSO_001:{ID:"TORSO_001",name:"protective shirt",type:"heavy armor chest",slot:"torso",icon:"\ud83d\udc55",protection:[{category:"physical",element:"all",tier:{1:20,2:23,3:26,4:29,5:32}}]},TROUSERS_001:{ID:"TROUSERS_001",name:"protective pants",type:"heavy armor legs",slot:"legs",icon:"\ud83d\udc56",protection:[{category:"physical",element:"all",tier:{1:14,2:17,3:20,4:23,5:26}}]},BOOTS_001:{ID:"BOOTS_001",name:"protective boots",type:"heavy armor feet",slot:"feet",icon:"\ud83d\udc5e",protection:[{category:"physical",element:"all",tier:{1:14,2:17,3:20,4:23,5:26}}]},GLOVES_001:{ID:"GLOVES_001",name:"protective gauntlets",type:"heavy armor hands",slot:"hands",icon:"\ud83e\udde4",protection:[{category:"physical",element:"all",tier:{1:14,2:17,3:20,4:23,5:26}}]},HELMET_001:{ID:"HELMET_001",name:"protective Helmet",type:"heavy armor helmet",slot:"head",icon:"\u26d1",protection:[{category:"physical",element:"all",tier:{1:14,2:17,3:20,4:23,5:26}}]}},$=function(e,t,a,n){return{ID:"item_".concat(V()),source:e,tier:t||1,modifiers:a||void 0,name:n||Z[e].name}},ee=function(e){var t=e.source;return Object.assign({},Z[t],e)},te=ee,ae=function(e,t){return t.map(function(t){return{category:t.category,element:t.element,value:t.tier[e]}})},ne=function(e,t){var a=t.tier,n=t.damage,r=t.protection,c=t.stats;return n&&e.damage.push(ae(a,n)),r&&e.protection.push(ae(a,r)),c&&e.stats.push(c),e},re=function(e,t,a,n,r){return{ID:"unit_".concat(V()),name:a,type:t,gender:n,faction:e,mods:r}},ce=function(e){var t=e.type,a=e.gender,n=e.mods,r=e.equipment,c=J[t].name,o=J[t].avatar[a],i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=t.stats,r=void 0===n?{}:n,c=r.length?z(e,r):e;if(!a||0===a.length)return{moddedStats:c};var o=a.map(function(e){return te(e)}).reduce(ne,{damage:[],protection:[],stats:[]}),i=function(e,t){return z(e,t)},s=o.damage.reduce(i,{}),l=o.protection.reduce(i,{}),u=o.stats.reduce(i,{});return{moddedStats:c,equippedStats:z(c,u),offenseEffects:s,defenseEffects:l}}(J[t].stats,n,r),s=i.moddedStats,l=i.equippedStats,u=i.offenseEffects,m=i.defenseEffects,f=n&&n.timeframe||s.rate;return Object(d.a)({},e,{avatar:o,race:c,stats:l||s,baseStats:s,status:J[t].status||{},offenseEffects:u,defenseEffects:m,timeframe:f,initialTimeframe:f})},oe=re,ie={XY001:Object(d.a)({sourceID:"XY001"},oe("good",J.HUMAN.ID,"Hans","male",{timeframe:20})),XY002:Object(d.a)({sourceID:"XY002"},oe("good",J.HUMAN.ID,"Olga","female",{timeframe:20,stats:{hp:-15,attack:10,rate:-5}})),XY003:Object(d.a)({sourceID:"XY003"},oe("good",J.ELF.ID,"Tingle","male",{timeframe:10})),XY004:Object(d.a)({sourceID:"XY004"},oe("good",J.ELF.ID,"Zelda","female",{timeframe:10})),XY005:Object(d.a)({sourceID:"XY005"},oe("good",J.FAIRY.ID,"Peter","male",{timeframe:0})),XY006:Object(d.a)({sourceID:"XY006"},oe("good",J.FAIRY.ID,"Navi","female",{timeframe:0}))},se={},le=[ie.XY001],ue=function(e){return e.map(function(e){return Object(p.a)({},e.ID,e)})},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case F:var n=ue(le);return Object.assign.apply(Object,[{}].concat(Object(u.a)(n)));case X:var r=a.baseUnits,c=ue(r);return Object.assign.apply(Object,[x()(e)].concat(Object(u.a)(c)));default:return e}},de="".concat("[RESOURCES]"," Increase amount of resources"),fe="".concat("[RESOURCES]"," Set initial amount of resources"),pe={GOLD:0,CRYST:0},be={GOLD:100,CRYST:0},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case fe:return be;case de:var n=a.resources;return z(x()(e),n);default:return e}},ve="".concat("[INVENTORY]"," Add Items to Inventory"),he="".concat("[INVENTORY]"," Delete Items from Inventory"),Ee="".concat("[INVENTORY]"," Update Item in Inventory"),ye="".concat("[INVENTORY]"," Initialise Items in Inventory"),Oe=$,_e=[],Ie=[Oe("DAGGER_001")],Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case ve:var n=a.items.map(function(e){return Oe(e)});return[].concat(Object(u.a)(x()(e)),Object(u.a)(n));case he:case Ee:return e;case ye:return Ie;default:return e}},De="".concat("[SQUAD]"," Add Squad Members"),Ne="".concat("[SQUAD]"," Delete Squad Members"),ke=function(e){return{type:De,payload:{units:e},meta:{persisted:"squad"}}},Ae=[],je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case De:var n=a.units;return[].concat(Object(u.a)(x()(e)),Object(u.a)(n));case Ne:var r=a.units;return x()(e).filter(function(e){return!r.includes(e)});default:return e}},Te="".concat("[EQUIPMENT]"," Equip Items"),Re="".concat("[EQUIPMENT]"," Unequip Items"),we=function(e){return{type:Re,payload:{items:e},meta:{persisted:"equipment",checkEquipment:"remove"}}},Le={},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Te:var n=a.items,r=a.unitID,c=n.map(function(e){var t=e.itemID,a=e.slot;return Object(p.a)({},t,{unitID:r,itemID:t,slot:a})});return Object.assign.apply(Object,[x()(e)].concat(Object(u.a)(c)));case Re:var o=a.items,i=x()(e);return o.map(function(e){return delete i[e]}),i;default:return e}},Me="[ACTOR]",qe="".concat(Me," Add Actors"),Ue="".concat(Me," Delete Actors"),Be="".concat(Me," Update Actors"),xe="".concat(Me," Delay Actor's next action"),Ce="".concat(Me," Reset all Actors' delay"),He="".concat(Me," Reset Actors State"),Pe=function(e){return{type:qe,payload:{actors:e}}},Ye=ce,We=[],Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case qe:var n=a.actors.map(function(e){return Object(d.a)({},Ye(e))});return[].concat(Object(u.a)(x()(e)),Object(u.a)(n));case Ue:var r=a.targets;return x()(e).filter(function(e){return!r.includes(e.ID)});case Be:var c=a.target,o=a.changedStatus;return x()(e).map(function(e){if(e.ID===c.ID){var t=z(e.status,o);return Object(d.a)({},e,{status:t})}return e});case xe:var i=a.target,s=a.delay;return e.map(function(e){return e.ID===i?Object(d.a)({},e,{timeframe:e.timeframe+s}):e});case Ce:return x()(e).map(function(e){return Object(d.a)({},e,{timeframe:e.initialTimeframe})});case He:return We;default:return e}},Xe="[ACTIVE TIME]",Ve="".concat(Xe," Advance Turn"),Ke="".concat(Xe," Reset Turn State"),Qe={turn:-1,tick:-1,status:"running"},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Ve:var n=e.turn,r=a.tick;return Object(d.a)({},e,{turn:n+1,tick:r});case Ke:return Qe;default:return e}},Je="".concat("[BATTLE]"," Initialise Battle Stage"),Ze="".concat("[BATTLE]"," Progress to next Battle Step"),$e="".concat("[BATTLE]"," Set current Battle Banner"),et="".concat("[BATTLE]"," Reset Battle Stage"),tt=function(){return{type:Ze,payload:{},meta:{battleStage:"nextStep"}}},at={},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Je:return{stage:a.stage,squadUnits:a.squadUnits,currentStep:0,currentPhase:-1,currentStatus:"hold",currentBanner:""};case Ze:var n=a.step,r=a.phase,c=a.status;return Object.assign({},x()(e),{currentStep:n,currentPhase:r,currentStatus:c});case $e:var o=a.banner;return Object.assign({},x()(e),{currentBanner:o});case et:return at;default:return e}},rt="".concat("[BATTLE LOG]"," Log Battle"),ct="".concat("[BATTLE LOG]"," Reset Battle Log"),ot=function(e){var t=e.actor,a=e.action;return{type:rt,payload:{actor:t,action:a,logID:"log_".concat(V()),timestamp:Date.now()}}},it=[],st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case rt:return[].concat(Object(u.a)(x()(e)),[a]);case ct:return it;default:return e}},lt="".concat("[TARGET ACTOR]"," Select actor from battle"),ut="".concat("[TARGET ACTOR]"," Check selected actor for validity"),mt=function(e){return{type:lt,payload:{actor:e},meta:{targetActor:"checkSame"}}},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case lt:return a.actor;default:return e}},ft=a(8),pt="".concat("[PROGRESS]"," Progress in Story Mode"),bt=function(e){return{type:pt,payload:{progress:e},meta:{persisted:"progression",checkProgress:"true"}}},gt={nextStage:"1-1",stages:{1:{1:"new"}}},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case pt:var n=a.chapter,r=a.section,c=a.status,o=a.nextStage,i=e.stages,s=e.nextStage,l=x()(i);if(l[n][r]=c,o&&"ToBeContinued"!==o){var u=o.split("-"),m=Object(ft.a)(u,2),d=m[0],f=m[1],p=parseInt(d,10),b=parseInt(f,10);l[p]=l[p]||{},l[p][b]="new"}return{nextStage:o||s,stages:l};default:return e}},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type===O?t.payload.battleStage:e},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type===y?t.payload.unitID:e},yt="".concat("[INIT]"," Set Initial values for the game"),Ot={version:.42,author:"Konrad Abe",studio:"All Bits Equal",name:"Clash of Emoji"},_t={status:!1,version:-1},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;switch((arguments.length>1?arguments[1]:void 0).type){case yt:return{status:!0,version:Ot.version};default:return e}},St=Object(m.c)(Object(d.a)({gameInitialised:It},n,r,{location:U})),Dt=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(n){var r,c=(n.meta||{}).initGameAction,o=a().gameInitialised,i=o.status,s=o.version;return c?e(n):i&&s===Ot.version?e(n):i&&s<Ot.version?e(n):(t({type:yt,payload:{},meta:{persisted:"gameInitialised",initGameAction:!0}}),t({type:ye,payload:{},meta:{persisted:"inventory",initGameAction:!0}}),t({type:F,payload:{},meta:{persisted:"roster",checkRoster:"initialiseSquad"}}),t({type:fe,payload:{resources:r},meta:{persisted:"resources"}}),void t(I()))}}},Nt={},kt={},At=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}},jt=[function(){return function(e){return function(t){var a=t.meta&&t.meta.throttle;return a?!Nt[t.type]&&(Nt[t.type]=!0,setTimeout(function(){Nt[t.type]=!1},a),e(t)):e(t)}}},function(){return function(e){return function(t){var a=(t.meta||{}).debounce;a?(kt[t.type]&&clearTimeout(kt[t.type]),kt[t.type]=setTimeout(function(){delete kt[t.type],e(t)},a)):e(t)}}},function(){return function(e){return function(t){t.meta&&t.meta.measure?(console.time("# Measured: ".concat(t.type)),e(t),console.timeEnd("# Measured: ".concat(t.type))):e(t)}}},function(e){return function(t){return function(a){var n=a.meta&&a.meta.persisted;if(!n)return t(a);var r=e.getState()[n];t(a);var c=e.getState()[n];if(c!==r){var o=At();!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){}}(Object(d.a)({},o,Object(p.a)({},n,c)))}}}}],Tt=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(n){var r=n.type,c=n.payload,o=function(){console.log("# ILLEGAL PAGE LOAD #"),t(I())};switch(r){case y:var i=c.unitID;if(!a().roster[i]){o();break}e(n);break;case _:if(!a().battleStage){o();break}e(n);break;default:e(n)}}}},Rt=function(e){var t=e.dispatch;return function(e){return function(a){var n=a.type,r=(a.meta||{}).gameState;if(r)switch(r){case"routing":t({type:H,payload:{page:n},meta:{persisted:"gameState"}}),e(a);break;default:e(a)}else e(a)}}},wt=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(n){var r=(n.meta||{}).checkRoster;e(n),r&&"initialiseSquad"===r&&t(ke(Object(u.a)(Object.keys(a().roster))))}}},Lt=a(6),Gt=Object(Lt.a)(function(e){return e.unitID},function(e){return e.equipment},function(e,t){return Object.values(t).reduce(function(t,a){return a.unitID===e&&t.push(a.itemID),t},[])}),Mt=Object(Lt.a)(Gt,function(e){return e.inventory},function(e,t){return t.filter(function(t){return e.includes(t.ID)})}),qt=ee,Ut=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(n){var r=n.payload,c=(n.meta||{}).checkEquipment;if(!c)return e(n);switch(c){case"add":var o=r.items,i=r.unitID,s=Mt(a()).map(function(e){return qt(e)}),l=K(s,"slot"),u=[],m=o.map(function(e){var t=qt(a().inventory.filter(function(t){return t.ID===e})[0]).slot;return l[t]&&u.push(l[t]),{itemID:e,slot:t}});if(u.length){var d=u.map(function(e){return e.map(function(e){return e.ID})});t(we(d[0]))}if(m.length){var f=Object.assign(n,{payload:{items:m,unitID:i}});e(f)}break;default:e(n)}}}},Bt=function(e){var t=e.getState,a=e.dispatch;return function(e){return function(n){var r,c=(n.meta||{}).battleStage;if(c)switch(c){case"init":e(n),a(tt());break;case"nextStep":var o=t().battle,i=o.stage,s=o.squadUnits,l={step:o.currentStep,phase:o.currentPhase};if(l.phase+=1,void 0===i.location[l.step][l.phase]&&(l.step+=1,l.phase=0,void 0===i.location[l.step])){var u=i.ID;a(bt({stageID:u,outcome:"won"})),l.step=-1,l.phase=-1}if(-1===l.step)break;var m=i.location[l.step][l.phase];if(l.status=m.battle?"active":"hold",e(Object.assign({},n,{payload:l})),m.banner){a((r=m.banner,{type:$e,payload:{banner:r}})),setTimeout(function(){a(tt())},2800);break}if(m.player){a(Pe(s)),a(tt());break}if(m.story)break;if(m.enemies){a(Pe(m.enemies)),a(tt());break}m.battle&&a({type:Ce,payload:{}});break;case"check":e(n);var d=t(),f=d.battle,p=d.actors,b=K(Object.values(p),"faction"),g=b.good,v=b.bad,h=f.stage.ID;if(g&&v)break;if(g){a(tt());break}a(bt({stageID:h,outcome:"lost"}));break;case"reset":a(mt("")),a({type:He,payload:{}}),a({type:Ke,payload:{}}),a({type:ct,payload:{}}),e(n);break;case"first":case"repeat":case"lost":e(n),a({type:_,meta:{gameState:"routing"}});break;default:e(n)}else e(n)}}},xt=function(e,t){var a=e.stats,n=e.offenseEffects,r=t.stats,c=t.defenseEffects,o=n?Object.values(n):[],i=c?Object.values(c):[],s=a.attack,l=r.defense,u=s+(o&&o.length>0?o.reduce(function(e,t){return e+t.value},0):0),m=l+(i&&i.length>0?i.reduce(function(e,t){return e+t.value},0):0);return 0===u?0:0===m?u:u<m?.5*u-.5*u*(1-u/m):u>m?u-m*(m/u)/2:u===m?.5*u:0},Ct=function(e,t,a){switch(a){case"attack":default:return{damage:Math.round(xt(e,t))}}},Ht=function(e,t,a){var n=function(e,t){var a="good"===e?"bad":"good";return K(t,"faction")[a]}(e.faction,t);if(!n)return{type:"idle",delay:5e4};var r=function(e,t,a){return"bad"!==e&&t.filter(function(e){return e.ID===a})}(e.faction,n,a)[0]||function(e){return e[Math.floor(Math.random()*e.length)]}(n);return{type:"attack",delay:3e3,target:r,changedStatus:Ct(e,r,"attack")}},Pt=function(e,t){var a=function(e){return Q(e,"timeframe")[0]}(e);return{actor:a,action:Ht(a,e,t)}},Yt=function(e){var t=e.getState,a=e.dispatch;return function(e){return function(n){var r,c,o=(n.meta||{}).processBattle;if(o)switch(o){case"calculate":e(n);var i=t(),s=i.actors,l=i.targetActor;if(s.length>0){var u=Pt(s,l),m=u.actor;a(ot(u)),a((r=m.ID,c=m.stats.rate,{type:xe,payload:{target:r,delay:c}})),u.action.target&&a(function(e){return{type:Be,payload:{target:e.target,changedStatus:e.changedStatus},meta:{processBattle:"check"}}}(u.action))}break;case"check":e(n);var d=t().actors;!function(){var e=d.map(function(e){var t;return(t=e).stats.hp-t.status.damage<=0?e:null}).filter(function(e){return null!=e});if(e.length>0){var t=e.map(function(e){return a(ot({actor:e,action:{target:e,type:"death"}})),e.ID});a({type:Ue,payload:{targets:t},meta:{battleStage:"check"}}),a({type:ut,payload:{},meta:{targetActor:"checkDeath"}})}}();break;default:e(n)}else e(n)}}},Wt=function(e){var t=e.getState,a=e.dispatch;return function(e){return function(n){var r=(n.meta||{}).targetActor;if(!r)return e(n);switch(r){case"checkSame":var c=t().targetActor,o=n.payload.actor;return o&&o===c?a(mt("")):e(n);case"checkDeath":var i=t(),s=i.targetActor;i.actors.filter(function(e){return e.ID===s}).length||a(mt(""));break;default:return e(n)}return e(n)}}},Ft=re,Xt={"1-1":{ID:"1-1",title:"The Beginning (1-1)",location:[[{player:!0},{story:[{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:"Halt, who goes there?!"},{avatar:"\u2753",name:"\u2754",side:"right",text:"*sounds of combat are coming from the woods*"},{avatar:"\u2753",name:"*female voice*",side:"right",text:"GET OFF ME, YA DIRTY BARSTUD!!!"},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:"Damn, gotta hurry!"}]},{banner:"Prelude"},{enemies:[Ft("bad",J.GOBLIN.ID,"Goblin A","male")]},{battle:!0},{enemies:[Ft("bad",J.HUMAN.ID,"Olga","female")]},{story:[{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:"Are you ok?"},{avatar:"\ud83d\udc69",name:"\u2754",side:"right",text:"Don't you think for one second that I'm gonna smooch ya for that."},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:". . ."},{avatar:"\ud83d\udc69",name:"\u2754",side:"right",text:"I'm not some damsel in distress that needs saving. I can hold my own in battle!"},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:". . ."},{avatar:"\ud83d\udc69",name:"\u2754",side:"right",text:"I was about to whoop his sorry buttock when you showed up and stole the show..."},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:"Yeah, I could see that... I just wanted to lend a hand. I mean, it's not like we get exp for killing random enemies, right?!"},{avatar:"\ud83d\udc69",name:"Olga",side:"right",text:'Yeah, right... whatev. I\'m Olga. Thanks for the "help".'}]}]],reward:{first:["CRYST_10","HERO_XY002","GOLD_100","WEAPON_1","ARMOR_1"],repeat:["WEAPON_1","GOLD_15"],lost:["GOLD_5"]}},"1-2":{ID:"1-2",title:"First Waves (1-2)",location:[[{enemies:[Ft("bad",J.GOBLIN.ID,"Goblin A","male"),Ft("bad",J.GOBLIN.ID,"Goblin B","male")]},{player:!0},{story:[{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:"Wanna help *me* out this time?"},{avatar:"\ud83d\udc69",name:"Olga",side:"right",text:"You sure look like you need help, that's for sure."}]},{banner:"Wave 1/2"},{battle:!0}],[{story:[{avatar:"\ud83d\udc69",name:"Olga",side:"right",text:"There's one more. That's a big one."},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:"No problem, we can handle that! ... *KIAI!*"},{avatar:"\ud83d\udc69",name:"Olga",side:"right",text:". . ."}]},{enemies:[Ft("bad",J.ORC.ID,"Orc A","male")]},{banner:"Wave 2/2"},{battle:!0},{story:[{avatar:"\ud83d\udc69",name:"Olga",side:"right",text:"You're not *that* bad, after all. Mind if I tag along for now?"},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:". . ."},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:"Yeah, why not. The more, the merrier. I'm just headed to town anyway."},{avatar:"\ud83d\udc69",name:"Olga",side:"right",text:"Great. And maybe we pass a river and you can do something about that smell of yours."},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:". . ."}]}]],reward:{first:["CRYST_10","GOLD_200","WEAPON_1","ARMOR_1"],repeat:["ARMOR_1","GOLD_20"],lost:["GOLD_10"]}},"1-3":{ID:"1-3",location:[[{enemies:[Ft("bad",J.ORC.ID,"Orc A","male"),Ft("bad",J.ORC.ID,"Orc B","male")]},{player:!0},{banner:"GUARDS!"},{battle:!0},{enemies:[Ft("bad",J.ELF.ID,"Tinkle","male")]},{story:[{avatar:"\ud83e\udddd\u200d\u2642\ufe0f",name:"Tinkle",side:"right",text:"My name is Tinkle. You seem to be totally trustworthy and you killed my captors. I owe you my life!"},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:". . ."},{avatar:"\ud83d\udc69",name:"Olga",side:"left",text:"Ooooookay. So now you want to follow us and do our every bidding?"},{avatar:"\ud83e\udddd\u200d\u2642\ufe0f",name:"Tinkle",side:"right",text:"If that is your command, I will do exactly that. No questions asked."},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:". . ."},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:"I'm out, this is bull!"}]}]],reward:{first:["HERO_XY003","CRYST_10","SET_FIRE_1","SET_EARTH_1","WEAPON_1","ARMOR_1","WEAPON_2","ARMOR_2","GOLD_300"],repeat:["WEAPON_1","ARMOR_1","GOLD_30"],lost:["GOLD_15"]}},"1-4":{ID:"1-4",title:"BOSS STAGE",location:[[{player:!0},{enemies:[Ft("bad",J.GOBLIN.ID,"Goblin A","male"),Ft("bad",J.GOBLIN.ID,"Goblin B","male")]},{banner:"Wave 1/3"},{battle:!0}],[{banner:"Wave 2/3"},{enemies:[Ft("bad",J.ORC.ID,"Orc A","male")]},{battle:!0}],[{banner:"The Orc Chieftain (3/3)"},{enemies:[Ft("bad",J.ORC.ID,"Orc Chieftain","male",{timeframe:-10,stats:{hp:25,attack:15,rate:-5}}),Ft("bad",J.GOBLIN.ID,"Goblin A","male"),Ft("bad",J.GOBLIN.ID,"Goblin B","male"),Ft("bad",J.GOBLIN.ID,"Goblin C","male"),Ft("bad",J.GOBLIN.ID,"Goblin D","male")]},{battle:!0}]],reward:{first:["CRYST_50","WEAPON_2","ARMOR_2","GOLD_1200"],repeat:["WEAPON_2","ARMOR_2","GOLD_120"],lost:["WEAPON_1","ARMOR_1","GOLD_50"]}},"2-1":{ID:"2-1",location:[[{player:!0},{enemies:[Ft("bad",J.SKELETON.ID,"Skeleton A","male"),Ft("bad",J.SKELETON.ID,"Skeleton B","male"),Ft("bad",J.SKELETON.ID,"Skeleton C","male")]},{banner:"A new enemy"},{battle:!0},{banner:"The Wall"},{story:[{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:"There seems to be an invisible wall in front of us!"},{avatar:"\ud83d\udc69",name:"Olga",side:"right",text:"That's funny... is that some sort of evil spell?"},{avatar:"\ud83e\udddd",name:"Tinkle",side:"right",text:"I think I can debunk this. It seems, the dev was lazy and didn't create enough levels for us to clear."},{avatar:"\ud83d\udc68",name:"Hans",side:"left",text:"Friend, you are talking in strange tongues. I hear the words but the meaning eludes me!"},{avatar:"\ud83e\udddd",name:"Tinkle",side:"right",text:"Ok, in more simple words: We can't continue for now and need to wait till the way is clear again. Let's just kill some more undead for now and try again later."}]}]],reward:{first:["CRYST_10","GOLD_300","WEAPON_2"],repeat:["WEAPON_2","GOLD_30"],lost:["GOLD_15"]}}},Vt=[Tt,Rt,wt,Ut,Bt,Yt,Wt,function(e){var t=e.getState,a=e.dispatch;return function(e){return function(n){var r=n.payload;if(!(n.meta||{}).checkProgress)return e(n);var c=r.progress,o=c.stageID,i=c.outcome,s=o.split("-"),l=Object(ft.a)(s,2),u=l[0],m=l[1],f=parseInt(u,10),p=parseInt(m,10),b=t().progression.stages[f][p];if(!b)return console.log("catch 23!"),!1;var g,v={stageID:o,chapter:f,section:p,outcome:"lost"===i?i:"cleared"===b?"repeat":"first",status:"cleared"===b?b:"won"===i?"cleared":"failed",nextStage:!1};if("won"===i&&("new"===b||"failed"===b)){var h=Xt["".concat(f,"-").concat(p+1)]||Xt["".concat(f+1,"-",1)]||{ID:"ToBeContinued"};v.nextStage=h.ID}return a((g=v.outcome,{type:P,payload:{battleResult:g},meta:{battleStage:g,persisted:"gameState"}})),e(Object(d.a)({},n,{payload:v}))}}}],Kt=[Dt].concat(Object(u.a)(jt),[G],Object(u.a)(Vt));var Qt=At(),zt=Object(m.d)(M,m.a.apply(void 0,Object(u.a)(Kt)),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}),Jt=function(){var e=Object(m.e)(St,Qt,zt);return q(),e},Zt=a(10),$t=a.n(Zt),ea=a(33),ta=function(e){var t=e.children;return i.a.createElement("div",{className:"game"},i.a.createElement("div",{className:"game__body"},i.a.Children.map(t,function(e){return e})),i.a.createElement("div",{className:"game__footer"},i.a.createElement("em",null,"made by AllBitsEqual")))};var aa=function(){return i.a.createElement(ta,null,i.a.createElement("div",{className:"scene--base scene__home"},i.a.createElement("span",{className:"game__title--background"},"test"),i.a.createElement("h1",{className:"game__title"},i.a.createElement("span",{className:"game__title--clash"},"Clash"),i.a.createElement("span",{className:"game__title--of"},"of"),i.a.createElement("span",{className:"game__title--emoji"},"Emoji"),i.a.createElement("span",{className:"game__title--poo",role:"img","aria-label":"poo"},"\ud83d\udca9"),i.a.createElement("span",{className:"game__title--bomb",role:"img","aria-label":"da bomb"},"\ud83d\udca3"),i.a.createElement("em",{className:"game__title--alpha"}," (\u03b1lpha)")),i.a.createElement("div",{className:"game__title--buttons"},i.a.createElement($t.a,{className:"buttonLink--wrapper",to:D()},i.a.createElement("button",{className:"button--base",type:"button"},"Start")),i.a.createElement($t.a,{className:"buttonLink--wrapper",to:S()},i.a.createElement("button",{className:"button--base",type:"button"},"Settings")))))},na=a(12),ra={POOP:"\ud83d\udca9",RESOURCES:{GOLD:{icon:"\ud83d\udcb0",name:"Gold"},CRYST:{icon:"\ud83d\udca0",name:"Cryst"},GEMS:{icon:"\ud83d\udc8e",name:"Gems"}},MENU:{icon:"\u2630",name:"Menu"},MORE:{icon:"\u2026",name:"More"},CASINO:{icon:"\ud83c\udfb0",name:"Casino"},GAMBLE:{icon:"\ud83c\udfb2",name:"Gamble"},SHOP:{icon:"\ud83d\udecd\ufe0f",name:"Shop"},INVENTORY:{icon:"\ud83c\udf92",name:"Inventory"},MISC:{QUESTION_MARK_1:{icon:"\u2753",name:"Question Mark"},QUESTION_MARK_2:{icon:"\u2754",name:"Question Mark"},EXCLAMATION_MARK_1:{icon:"\u2757",name:"Exclamation Mark"},EXCLAMATION_MARK_2:{icon:"\u2755",name:"Exclamation Mark"}},UI:{SKIP:{icon:"\u23e9",name:"Skip"},REPEAT:{icon:"\ud83d\udd01",name:"Repeat"},CHECK:{icon:"\u2714\ufe0f",name:"Check"},MULTIPLY:{icon:"\u2716\ufe0f",name:"Multiply"},DIVISION:{icon:"\u2797",name:"Division"},PLUS:{icon:"\u2795",name:"Plus"},MINUS:{icon:"\u2796",name:"Minus"},CORRECT:{icon:"\u2b55",name:"Correct"},WRONG:{icon:"\u274c",name:"Wrong"}},STATS:{BELIEVE:{icon:"\ud83d\uded0",name:"Believe"},PHYSICAL:{icon:"\ud83d\uded0",name:"Believe"},MAGIC:{icon:"\ud83d\udd2f",name:"Believe"}},ELEMENTS:{AIR:{icon:"\ud83c\udf2a",name:"Air"},FIRE:{icon:"\ud83d\udd25",name:"Fire"},EARTH:{icon:"\ud83e\udd54",name:"Earth"},WATER:{icon:"\ud83d\udca7",name:"Water"}}},ca=Object(na.a)(function(e){return{resources:e.resources}})(function(e){var t=e.resources,a=Object.keys(t).map(function(e){var a=ra.RESOURCES[e],n=a.icon,r=a.name;return i.a.createElement("div",{key:"topBar__resources--item res_".concat(e),title:r,className:"resources__bar--item resource_".concat(e)},i.a.createElement("span",{className:"topBar__resources--icon"},n),i.a.createElement("span",{className:"topBar__resources--amount"},t[e]))});return i.a.createElement("div",{className:"topBar__default"},a)}),oa=function(e){var t=e.children;return i.a.createElement("div",{className:"game"},i.a.createElement("header",{className:"game__header"},i.a.createElement(ca,null)),i.a.createElement("div",{className:"game__body"},i.a.Children.map(t,function(e){return e})),i.a.createElement("div",{className:"game__footer"},i.a.createElement("em",null,"made by AllBitsEqual")))},ia=Object(Lt.a)(function(e){return e.gameState},function(e){var t=e.page;return Object(u.a)(t).slice(-2)[0]}),sa=Object(l.connect)(function(e){return{previousPage:ia(e)}})(function(e){var t=e.children,a={type:e.previousPage,meta:{gameState:"routing"}};return i.a.createElement($t.a,{className:"backLink--wrapper",to:a},i.a.Children.map(t,function(e){return e}))});var la=function(){return i.a.createElement(oa,null,i.a.createElement("div",{className:"scene--base scene__settings"},i.a.createElement("div",{className:"scene--title"},i.a.createElement(sa,null,i.a.createElement("button",{className:"backLink--title",type:"button"},"Back")),i.a.createElement("h1",null,"Settings")),i.a.createElement("h2",null,"Here be Dragons..."),i.a.createElement("ul",null,i.a.createElement("li",null,"Difficulty"),i.a.createElement("li",null,"Language"),i.a.createElement("li",null,"Link Account to Social Media"),i.a.createElement("li",null,"Link Account to OpenID"))))},ua=ce,ma=function(e){var t=e.inSquad,a=e.baseUnit,n=e.clickAdd,r=e.clickEdit,c=e.clickDelete,o=ua(a),s=o.ID,l=o.name,u=o.avatar,m=function(e,t,a){return i.a.createElement("button",{type:"button",className:t,onClick:a},e)},d=!t&&n.enabled?m("\u2795 ADD","button--add",function(){return n.handler(s)}):"",f=r.enabled?m("\u2699\ufe0f EDIT","",function(){return r.handler(s)}):"",p=t&&c.enabled?m("\u2796 DELETE","button--delete",function(){return c.handler(s)}):"";return i.a.createElement("div",{className:"unit__card"},l,u,f,d,p)},da=function(e){var t=e.squadUnits,a=e.handleEdit,n=e.handleDelete,r=e.children;return i.a.createElement("div",{className:"squad__monitor"},i.a.createElement("h2",{className:"squad__monitor--title"},i.a.createElement("span",null,"Your current Squad"),i.a.Children.map(r,function(e){return e})),i.a.createElement("div",{className:"squad__monitor--listing"},t.map(function(e){return i.a.createElement(ma,{key:e.ID,inSquad:!0,baseUnit:e,clickAdd:{enabled:!1},clickEdit:a,clickDelete:n})})))};da.defaultProps={children:[]};var fa,pa=da,ba=Object(Lt.a)(function(e){return e.squad},function(e){return e.roster},function(e,t){return Object.values(t).filter(function(t){return e.includes(t.ID)})}),ga=Object(Lt.a)(ba,function(e){return e.equipment},function(e){return e.inventory},function(e,t,a){return e.map(function(e){var n=Object.values(t).reduce(function(t,a){return a.unitID===e.ID&&t.push(a.itemID),t},[]),r=a.filter(function(e){return n.includes(e.ID)});return Object.assign({},e,{equipment:r})})}),va=Object(Lt.a)(function(e){return e.progression},function(){return Xt},function(e,t){var a=e.stages;return Object.values(t).map(function(e){var t=e.ID.split("-"),n=Object(ft.a)(t,2),r=n[0],c=n[1],o=parseInt(r,10),i=parseInt(c,10);a[o]=a[o]||{};var s=a[o][i]||!1;return Object(d.a)({},e,{status:s})})}),ha=Object(na.a)(function(e){return{squadUnits:ga(e),stages:va(e)}})(function(e){var t=e.squadUnits,a=e.stages,n=t.length?a.map(function(e){var t=e.ID,a=e.title,n=e.status,r=e.location.length,c=a||t,o="failed"===n?"":i.a.createElement("div",{className:"stage__badge stage__badge--".concat(n)},n);return n?i.a.createElement($t.a,{key:t,className:"stage__box stage__box--".concat(n),to:N(t)},o,i.a.createElement("div",{className:"stage__box--title"},c),i.a.createElement("div",{className:"stage__box--stages"},"Stages: ".concat(r))):""}):i.a.createElement("div",{className:"no__units"},"Please select at least one unit for your current squad!");return i.a.createElement(oa,null,i.a.createElement("div",{className:"scene--base scene__adventure"},i.a.createElement("div",{className:"scene--title"},i.a.createElement(sa,null,i.a.createElement("button",{className:"backLink--title",type:"button"},"Back")),i.a.createElement("h1",null,"Adventure")),i.a.createElement(pa,{squadUnits:t,handleEdit:{enabled:!1},handleDelete:{enabled:!1}},i.a.createElement($t.a,{className:"buttonLink--wrapper",to:{type:E,meta:{gameState:"routing"}}},i.a.createElement("button",{type:"button"},"Edit Squad"))),i.a.createElement("h2",null,"Select a stage:"),i.a.createElement("div",{className:"adventure__stage--list"},n)))}),Ea=function(e){var t=e.rosterUnits,a=e.handleAdd,n=e.handleEdit;return i.a.createElement("div",{className:"roster__monitor"},i.a.createElement("h3",null,"Hire more members:"),i.a.createElement("div",{className:"roster__monitor--listing"},t.map(function(e){return i.a.createElement(ma,{key:e.ID,baseUnit:e,inSquad:!1,clickAdd:a,clickEdit:n,clickDelete:{enabled:!1}})})))},ya=Object(Lt.a)(function(e){return e.squad},function(e){return e.roster},function(e,t){return Object.values(t).filter(function(t){return!e.includes(t.ID)})}),Oa=Object(l.connect)(function(e){return{squadUnits:ga(e),rosterUnits:ya(e)}},function(e){return{editUnit:function(t){return e({type:y,payload:{unitID:t},meta:{gameState:"routing"}})},addMember:function(t){return e(ke([t]))},deleteMember:function(t){return e({type:Ne,payload:{units:[t]},meta:{persisted:"squad"}})}}})(function(e){var t=e.squadUnits,a=e.rosterUnits,n=e.editUnit,r=e.addMember,c=e.deleteMember;return i.a.createElement(oa,null,i.a.createElement("div",{className:"scene--base scene__squad"},i.a.createElement("div",{className:"scene--title"},i.a.createElement(sa,null,i.a.createElement("button",{className:"backLink--title",type:"button"},"Back")),i.a.createElement("h1",null,"Squad Page")),i.a.createElement(pa,{squadUnits:t,handleEdit:{enabled:!0,handler:n},handleDelete:{enabled:!0,handler:c}}),i.a.createElement(Ea,{rosterUnits:a,handleEdit:{enabled:!0,handler:n},handleAdd:{enabled:!0,handler:r}}),i.a.createElement(sa,null,i.a.createElement("button",{className:"backLink--base",type:"button"},"Back to previous screen"))))}),_a=ee,Ia=function(e){var t=e.item,a=e.clickEquip,n=e.clickUnequip,r=_a(t),c=function(e,t,a){return i.a.createElement("button",{type:"button",className:t,onClick:a},e)},o=a.enabled?c("\u2795 EQUIP","button--add",function(){return a.handler([r.ID])}):"",s=n.enabled?c("\u2796 REMOVE","button--delete",function(){return n.handler([r.ID])}):"";return i.a.createElement("div",{key:r.ID,className:"item__card item__card--".concat(r.type)},i.a.createElement("span",null,r.icon),r.name,o,s)},Sa=ce,Da=function(e){var t=e.baseUnit,a=e.equipment,n=e.showEquipment,r=e.showStats,c=e.handleEquip,s=e.handleUnequip,l=Sa(t),u=l.name,m=l.avatar,d=l.race,f=l.stats,p=l.status,b=function(e){if("undefined"===typeof e||!0!==r)return"";var t=Object.keys(e).map(function(e){return i.a.createElement("tr",{key:e},i.a.createElement("td",null,e),i.a.createElement("td",null,f[e]))});return i.a.createElement("table",null,i.a.createElement("tbody",null,t))};return i.a.createElement(o.Fragment,null,i.a.createElement("h1",null,"Unit: ".concat(u)),i.a.createElement("div",{className:"unit__monitor--member"},i.a.createElement("div",{className:"unit__monitor--img"},m),i.a.createElement("div",{className:"unit__monitor--detail"},i.a.createElement("div",{className:"unit__monitor--name"},"".concat(u," (").concat(d,")")),i.a.createElement("div",{className:"unit__monitor--stats"},b(f)))),b(p),"undefined"===typeof a||!0!==n?"":i.a.createElement("div",{className:"equipment__monitor"},i.a.createElement("h2",null,"Equipped"),i.a.createElement("div",{className:"equipment__monitor--listing"},a.map(function(e){return i.a.createElement(Ia,{key:e.ID,item:e,clickEquip:c,clickUnequip:s})}))))},Na=function(e){var t=e.inventory,a=e.handleEquip,n=e.handleUnequip;return i.a.createElement("div",{className:"inventory__monitor"},i.a.createElement("h2",null,"Inventory:"),i.a.createElement("div",{className:"inventory__monitor--listing"},t.map(function(e){return i.a.createElement(Ia,{key:e.ID,item:e,clickEquip:a,clickUnequip:n})})))},ka=Object(Lt.a)(function(e){return e.equipment},function(e){return Object.values(e).reduce(function(e,t){return e.push(t.itemID),e},[])}),Aa=Object(Lt.a)(ka,function(e){return e.inventory},function(e,t){return t.filter(function(t){return!e.includes(t.ID)}).sort(function(e,t){return e.source<t.source?-1:e.source>t.source?1:0})}),ja=Object(l.connect)(function(e){return{baseUnit:(t=e.unitID,a=e.roster,a[t]),equipment:Mt(e),inventory:Aa(e)};var t,a},function(e){return{equipItemWithTarget:function(t,a){return e(function(e,t){return{type:Te,payload:{items:e,unitID:t},meta:{persisted:"equipment",checkEquipment:"add"}}}(t,a))},unequipItem:function(t){return e(we(t))}}})(function(e){var t=e.baseUnit,a=e.equipment,n=e.inventory,r=e.equipItemWithTarget,c=e.unequipItem,o=t.ID;return i.a.createElement(oa,null,i.a.createElement("div",{className:"scene--base scene__unit"},i.a.createElement("div",{className:"scene--title"},i.a.createElement(sa,null,i.a.createElement("button",{className:"backLink--title",type:"button"},"Back")),i.a.createElement("h1",null,"Unit Page")),i.a.createElement("div",{className:"unit__monitor"},i.a.createElement(Da,{baseUnit:t,equipment:a,showEquipment:!0,showStats:!0,handleEquip:{enabled:!1},handleUnequip:{enabled:!0,handler:c}}),i.a.createElement(Na,{inventory:n,handleEquip:{enabled:!0,handler:function(e){return function(e,t){return e(t,o)}(r,e)}},handleUnequip:{enabled:!1}})),i.a.createElement(sa,null,i.a.createElement("button",{className:"backLink--base",type:"button"},"Back to previous screen"))))}),Ta=function(e){var t=e.children;return i.a.createElement("div",{className:"game"},i.a.createElement("div",{className:"game__body"},i.a.Children.map(t,function(e){return e})))},Ra=function(e){var t=e.actor,a=e.isSelected,n=e.clickHandler,r=t.ID,c=t.name,o=t.avatar,s=t.stats,l=t.status.damage||0,u="actor__card ".concat(a?"selected":"");return i.a.createElement("div",{className:u,onClick:function(){return n(r)}},i.a.createElement("div",{className:"actor__card--img",role:"img","aria-label":"avatar"},o),i.a.createElement("div",{className:"actor__card--name"}," ".concat(c)),i.a.createElement("progress",{className:"actor__card--bar health__bar",value:s.hp-l,max:s.hp}))},wa=function(e,t,a,n){return t?i.a.createElement("div",{className:"battleStage__actors battleStage__actors--".concat(e)},t.map(function(e){var t=e.ID,r=a===t;return i.a.createElement(Ra,{key:e.ID,actor:e,isSelected:r,clickHandler:n})})):i.a.createElement("div",{className:"battleStage__actors no__units"},"\xa0")},La=function(e){var t=e.factions,a=e.selectedActor,n=e.unitClickHandler,r=t.good,c=t.bad;return i.a.createElement("div",{className:"battleStage__monitor"},wa("good-guys",r,a,n),wa("bad-guys",c,a,n))},Ga=function(e){var t=e.nextActors,a=e.selectedActor;return i.a.createElement("div",{className:"interactiveActionsBar"},t.map(function(e,t){var n=e.ID,r=e.faction,c=e.avatar,o="".concat(n,"_").concat(t),s=a===n?"selected":"";return i.a.createElement("div",{key:o,className:"iab__slot iab__slot--".concat(r," ").concat(s)},c)}))},Ma=a(80),qa=a.n(Ma),Ua=function(e){var t=e.entry,a=t.timestamp,n=qa()(a).format("H:mm:ss");return i.a.createElement("p",null,"[".concat(n,"] "),function(e){var t=e.actor,a=e.action,n=a.target,r=a.type;if(!n)return"No available targets.";var c=n.faction,o=n.name;if("death"===r)return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{role:"img","aria-label":"status"},"\u2620\ufe0f "),i.a.createElement("b",{className:c},o)," died.");var s=t.name,l=t.faction,u=a.changedStatus.damage;switch(a.type){case"attack":return i.a.createElement(i.a.Fragment,null,i.a.createElement("b",{className:l},s)," attacks ",i.a.createElement("b",{className:c},o)," for ".concat(u," damage."));default:return"Something strange happened and we weren't able to log it. Sorry!"}}(t))},Ba=function(e){var t=e.eventLog,a=Object(o.useState)(!0),n=Object(ft.a)(a,2),r=n[0],c=n[1],s=Object(o.useRef)(null),l=function(){var e=s.current,t=e.scrollHeight,a=e.clientHeight;return{chatLog:e,scrollHeight:t,height:a,scrollTop:e.scrollTop,maxScrollTop:t-a}};Object(o.useEffect)(function(){!function(){var e=l(),t=e.chatLog,a=e.maxScrollTop;r&&(t.scrollTop=a>0?a:0)}()});var u=function(){s.current&&c(function(){var e=l();return e.scrollTop===e.maxScrollTop}())},m=Object(ea.a)(200,function(){u()});return i.a.createElement("div",{className:"battleLog"},i.a.createElement("h5",{className:"battleLog__label"},"Battle Log:"),i.a.createElement("div",{className:"battleLog__display",ref:s,onScroll:function(){m()}},t.map(function(e){return i.a.createElement(Ua,{key:e.logID,entry:e})})))},xa=Object(Lt.a)(function(e){return e.battle},function(e){if(!e||!e.stage)return[];var t=e.stage.location,a=e.currentStep,n=e.currentPhase;return-1===n?{story:[]}:t[a][n].story||[]}),Ca=Object(na.a)(function(e){return{story:xa(e)}},function(e){return{progressAfterStory:function(){return e(tt())}}})(function(e){var t=Object(o.useState)(0),a=Object(ft.a)(t,2),n=a[0],r=a[1],c=e.story,s=e.progressAfterStory,l="",u=function(){r(n+1),c[n+1]||(r(0),s())};if((!c||c.length<=0)&&(l=""),c&&c[n]){var m=c[n];!function(e,t,a,n){l=i.a.createElement("div",{className:"storyMode",onClick:function(){return u()}},i.a.createElement("div",{className:"storyMode__wrapper"},i.a.createElement("div",{className:"storyMode__actor storyMode__actor--".concat(a)},i.a.createElement("div",{className:"storyMode__avatar"},e),i.a.createElement("div",{className:"storyMode__name"},t)),i.a.createElement("div",{className:"storyMode__text"},n)))}(m.avatar,m.name,m.side,m.text)}return l}),Ha=a(188),Pa=Object(Lt.a)(function(e){return e.battle},function(e){if(!e||!e.stage)return{currentTitle:"loading"};var t=e.stage.location[e.currentStep].title;return Object(d.a)({},e,{currentTitle:t})}),Ya=Object(l.connect)(function(e){return{activeTime:e.activeTime,battleData:Pa(e)}},function(e){return{advance:function(t){e(function(e){return{type:Ve,payload:{tick:e},meta:{processBattle:"calculate"}}}(t))}}})(function(e){var t=e.advance,a=e.activeTime.turn,n=e.battleData.currentStatus;return Object(o.useEffect)(function(){var e=Object(Ha.a)(1e3,2e3).subscribe(function(e){"active"===n&&t(e)});return function(){e.unsubscribe()}},[t,n]),i.a.createElement("div",{className:"turnCounter"},i.a.createElement("div",null,"".concat(a+1)))}),Wa=Object(Lt.a)(function(e){return e.actors},function(e){return K(Object.values(e),"faction")}),Fa=Object(Lt.a)(function(e){return e.actors},function(e){return Q(Object.values(function(e){return e.map(function(e){return[Object(d.a)({},e),Object(d.a)({},e,{timeframe:e.timeframe+e.stats.rate}),Object(d.a)({},e,{timeframe:e.timeframe+2*e.stats.rate}),Object(d.a)({},e,{timeframe:e.timeframe+3*e.stats.rate}),Object(d.a)({},e,{timeframe:e.timeframe+4*e.stats.rate})]}).flat()}(e)),"timeframe")}),Xa=Object(l.connect)(function(e){return{factions:Wa(e),nextActors:Fa(e),battleLog:e.battleLog,squadUnits:ga(e),battle:Pa(e),battleStage:e.battleStage,selectedActor:e.targetActor}},function(e){return{initialiseStage:function(t,a){e(function(e,t){return{type:Je,payload:{squadUnits:e,stage:t},meta:{battleStage:"init"}}}(t,a))},clearStage:function(){return e({type:et,payload:{},meta:{battleStage:"reset"}})},selectActor:function(t){return e(mt(t))}}})(function(e){var t=e.squadUnits,a=e.battle,n=e.battleStage,r=e.factions,c=e.selectedActor,s=e.nextActors,l=e.battleLog,u=e.initialiseStage,m=e.clearStage,d=e.selectActor,f=Xt[n],p=a.currentBanner,b=Object(o.useState)("battleStage__header"),g=Object(ft.a)(b,2),v=g[0],h=g[1];return Object(o.useEffect)(function(){return u(t,f),function(){m()}},[u,m,t,f]),Object(o.useEffect)(function(){p&&"loading"!==p&&(h("battleStage__header battleStage__header--animating"),setTimeout(function(){h("battleStage__header battleStage__header--animated")},2500))},[p]),i.a.createElement(Ta,null,i.a.createElement("div",{className:"scene--base scene__battleStage"},i.a.createElement("div",{className:"battleStage__stage"},i.a.createElement("div",{className:v},i.a.createElement("div",{className:"battleStage__header--title"},p)),i.a.createElement(La,{factions:r,selectedActor:c,unitClickHandler:d})),i.a.createElement("div",{className:"battleStage__iab"},i.a.createElement(Ya,null),i.a.createElement(Ga,{nextActors:s,selectedActor:c})),i.a.createElement("div",{className:"battleStage__ui"},i.a.createElement(Ba,{eventLog:l})),i.a.createElement(Ca,null)))}),Va=Object(Lt.a)(function(e){return e.gameState},function(e){return e.battleResult}),Ka={global:["Some enemies have an elemental weakness. Try to exploit those with the right spells and weapons.","If an enemy deals too much damage with an elemental attack, try to find something to raise your respective resistance."],lost:["Always make sure, you are using the best units for each battle. Recruit new units or check if new recruits are better suited for the task at hand.","You will often get useful equipment after battles. Check your squad for possible improvements every now and then.","If you want to take down one enemy first, you can focus attacks on it by selecting it.","Some enemies deal more damage than others. Try to focus your attacks on those first.","If you can't beat a certain enemy, try searching in old and cleared regions for some stuff to get better equipment."]},Qa=function(e){var t=e.category,a=Ka[t],n=a.length-1,r=Object(o.useState)(Math.floor(Math.random()*n)),c=Object(ft.a)(r,2),s=c[0],l=c[1],u=Object(o.useState)(a[s]),m=Object(ft.a)(u,2),d=m[0],f=m[1];return i.a.createElement("div",{className:"result__tips"},i.a.createElement("h3",null,"Tip:"),d,i.a.createElement("div",{className:"result__tips--paging"},i.a.createElement("button",{type:"button",className:"result__tips--next",onClick:function(){return function(){var e=s+1>n?0:s+1,t=a[e];l(e),f(t)}()}},"next"),i.a.createElement("span",{className:"result__tips--counter"}," ".concat(s+1,"/").concat(n+1))))},za={WEAPON:{1:["SWORD_001","MACE_001","DAGGER_001"],2:["SWORD_011"],3:[]},ARMOR:{1:["SHIELD_001","TORSO_001","TROUSERS_001","BOOTS_001","GLOVES_001"],2:["SHIELD_011"],3:[]},SET:{FIRE:["SWORD_011"],EARTH:["SHIELD_011"]}},Ja={GOLD:{name:"Gold",type:"resources",category:"currency"},CRYST:{name:"Cryst",type:"resources",category:"currency"},HERO:{name:"Hero",type:"roster",category:"unit"},WEAPON:{name:"Weapon",type:"inventory",category:"weapon"},ARMOR:{name:"Armor",type:"inventory",category:"armor"},SET:{name:"Set Item",type:"inventory",category:"set"}},Za=function(e){var t=e.split("_"),a=Object(ft.a)(t,2),n=a[0],r=a[1],c=Ja[n],o=c.name,i=c.type,s=c.category;return{ID:"reward_".concat(V()),source:e,name:o,type:i,category:s,identifier:n,details:r}},$a=function(e){return Za(e)},en=$,tn=ee,an=Object(l.connect)(null,function(e){return{addUnits:function(t){return e(function(e){return{type:X,payload:{baseUnits:e},meta:{persisted:"roster"}}}(t))},addItems:function(t){return e({type:ve,payload:{items:t},meta:{persisted:"inventory"}})},addResources:function(t){return e(function(e){return{type:de,payload:{resources:e},meta:{persisted:"resources"}}}(t))}}})(function(e){var t=e.rewards,a=e.addItems,n=e.addResources,r=e.addUnits,c=t.map(function(e){var t=$a(e),c=t.ID,o=t.type,i=t.name,s=t.identifier,l=t.details,u={};switch(o){case"resources":n(Object(p.a)({},s,parseInt(l,10))),u.icon=ra.RESOURCES[s].icon,u.detail="".concat(l," ").concat(i);break;case"roster":var m=ie[l];r([m]);var f=m.type,b=m.name,g=m.gender;u.icon=J[f].avatar[g],u.detail="".concat(b," joins the team!");break;case"inventory":var v=za[s][l],h=v[Math.floor(Math.random()*v.length)];a([h]);var E=tn(en(h)),y=E.icon,O=E.name;u.icon=y,u.detail=O}return Object(d.a)({ID:c},u)});return i.a.createElement("div",{className:"rewards--listing"},c.map(function(e){var t=e.ID,a=e.icon,n=e.detail;return i.a.createElement("div",{className:"reward__card",key:t},i.a.createElement("span",{className:"reward__card--icon"},a),i.a.createElement("span",{className:"reward__card--detail"},n))}))}),nn=Object(l.connect)(function(e){return{battleStage:e.battleStage,result:Va(e)}})(function(e){var t=e.battleStage,a=e.result,n=Xt[t].reward[a],r=function(){switch(a){case"first":return{headerText:"Stage cleared, congratulation!",headerClass:"result__header result__header--won"};case"repeat":return{headerText:"Stage cleared again, great!",headerClass:"result__header result__header--repeat"};case"lost":default:return{headerText:"YOU DIED",headerClass:"result__header result__header--lost"}}}(),c=r.headerText,o=r.headerClass;return i.a.createElement(oa,null,i.a.createElement("div",{className:"scene--base scene__battle-result"},i.a.createElement("div",{className:"scene--title"},i.a.createElement("h1",{className:o},c)),i.a.createElement(an,{rewards:n}),"lost"===a&&i.a.createElement(Qa,{category:a}),i.a.createElement($t.a,{className:"buttonLink--wrapper",to:D()},i.a.createElement("button",{className:"button--base",type:"button"},"Back to Adventure")),i.a.createElement($t.a,{className:"buttonLink--wrapper",to:I()},i.a.createElement("button",{className:"button--base",type:"button"},"Back to Home"))))}),rn=(fa={},Object(p.a)(fa,g,i.a.createElement(aa,null)),Object(p.a)(fa,v,i.a.createElement(la,null)),Object(p.a)(fa,h,i.a.createElement(ha,null)),Object(p.a)(fa,E,i.a.createElement(Oa,null)),Object(p.a)(fa,y,i.a.createElement(ja,null)),Object(p.a)(fa,O,i.a.createElement(Xa,null)),Object(p.a)(fa,_,i.a.createElement(nn,null)),fa),cn=(a(184),Object(l.connect)(function(e){return{location:e.location}})(function(e){var t=e.location,a=t.type,n=Object(o.useRef)(null),r=document.documentElement;var c=Object(o.useState)({width:0,height:0}),s=Object(ft.a)(c,2),l=s[0],u=s[1];Object(o.useEffect)(function(){function e(){n.current.className="game__outer adjusted";var e=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}(),t=e.width,a=e.height,c=t>a?1.78*a<=t?1.78*a:t:a*(1/1.78)<=t?a*(1/1.78):t,o=t>a?t*(1/1.78)<=a?t*(1/1.78):a:1.78*t<=a?1.78*t:a,i=(o>c?o:c)/37.5;u({width:c,height:o}),r.style.fontSize="".concat(i,"px")}var t=Object(ea.a)(200,function(){e()});return e(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}},[r.style.fontSize]);var m=l.width,d=l.height,f=t.type,p=f===g||f===O?"":i.a.createElement("div",{className:"TEMP_DEV_HOME_BUTTON"},i.a.createElement($t.a,{className:"buttonLink--wrapper",to:I()},i.a.createElement("button",{type:"button"},"Home")));return i.a.createElement("div",{className:"game__outer",ref:n,style:{width:m,height:d}},i.a.createElement("div",{className:"game__inner"},rn[a]),p)})),on=(a(185),Jt());Object(s.render)(i.a.createElement(l.Provider,{store:on},i.a.createElement(cn,null)),document.getElementById("root"))},81:function(e,t,a){e.exports=a(186)}},[[81,1,2]]]);
//# sourceMappingURL=main.c55fde88.chunk.js.map